<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ajax请求-fetch</title>
  </head>
  <body>
    <button id="btn">点我获取数据</button>
    <script>
      const btn = document.getElementById("btn");

      btn.onclick = function () {
          //fetch是原生js支持的一种ajax请求方式 采用promise API  
          fetch("http://localhost:7788/repos/hello")
           //通过promise的then获取服务器响应数据 注意 只要服务器返回响应then就会执行 跟状态码无关
          .then(function(res){
               if(res.status===200){
                  // res.json() 可以用来读取json格式的数据并返回一个promise对象
                  return res.json();
               }else{
                  throw new Error("请求失败")
               }
           })
           .then(function(res){
               //获取到数据后渲染
               console.log(res);
           })
           .catch(function(err){
                console.log("aa",err);
           }) 
      };
    </script>
  </body>
</html>
